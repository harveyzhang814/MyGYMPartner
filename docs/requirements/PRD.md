# MyGYMPartner - 健身伙伴应用产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品定位
MyGYMPartner是一款专为健身爱好者设计的Web端训练计划管理应用，帮助用户科学规划、记录和跟踪个人健身训练进度。

### 1.2 目标用户
- 健身爱好者
- 健身初学者
- 专业健身教练
- 需要系统化训练计划的用户

### 1.3 核心价值
- 提供个性化的训练计划管理
- 科学记录训练数据
- 基于动作库的标准化训练
- 可视化的训练进度跟踪

## 2. 功能需求

### 2.1 用户认证模块
- **用户注册**：支持邮箱注册
- **用户登录**：支持邮箱/用户名登录
- **密码管理**：密码重置、修改功能
- **第三方登录**：支持Google、微信等主流平台登录

### 2.2 日程管理模块
- **日历视图**：月视图、周视图、日视图（支持触摸滑动）
- **训练计划创建**：为特定日期创建训练计划
- **训练组导入**：从训练组库导入到日程
- **计划编辑**：修改、删除、复制训练计划
- **计划模板**：保存常用训练计划为模板
- **移动端优化**：触摸友好的日历操作，手势支持

### 2.3 训练组管理模块
- **训练组创建**：基于动作库创建训练组
- **动作选择**：从动作库选择目标动作
- **组数设置**：设置训练组数
- **重量配置**：为每组设置不同重量
- **次数配置**：为每组设置不同次数
- **训练组编辑**：修改、删除、复制训练组
- **训练组分类**：按身体部位、训练类型分类

### 2.4 训练记录模块
- **训练开始**：基于当日计划开始训练
- **实时记录**：记录实际完成的组数、重量、次数
- **计划对比**：显示计划vs实际完成情况
- **记录编辑**：支持修改已记录的数据
- **训练总结**：训练完成后的数据统计
- **历史记录**：查看历史训练记录
- **移动端优化**：大按钮设计，快速输入，语音输入支持

### 2.5 动作库管理模块
- **动作创建**：用户可自定义创建新动作
- **动作编辑**：修改动作信息、描述、分类等
- **动作删除**：删除不需要的动作（需检查关联关系）
- **动作搜索**：按名称、身体部位、设备搜索
- **动作详情**：查看动作描述、图片、视频
- **动作收藏**：收藏常用动作
- **动作分类**：按身体部位、设备类型分类
- **动作导入**：支持批量导入动作数据
- **动作模板**：提供常用动作模板快速创建

### 2.6 数据统计模块
- **训练统计**：训练次数、总时长、总重量统计
- **进度跟踪**：重量、次数变化趋势图
- **身体部位统计**：各部位训练频率统计
- **目标达成**：训练目标完成情况

## 3. 技术架构

### 3.1 前端技术栈
- **框架**：React 18 + TypeScript
- **状态管理**：Redux Toolkit + RTK Query
- **UI组件库**：Ant Design 5.x（支持响应式设计）
- **路由**：React Router v6
- **图表库**：Chart.js / Recharts（响应式图表）
- **日历组件**：FullCalendar（移动端适配）
- **构建工具**：Vite
- **样式**：CSS Modules + Less + CSS Grid/Flexbox
- **响应式设计**：移动优先（Mobile First）设计原则
- **PWA支持**：Service Worker + Web App Manifest

### 3.2 后端技术栈
- **框架**：Node.js + Express.js
- **数据库**：PostgreSQL
- **ORM**：Prisma
- **认证**：JWT + Passport.js
- **API文档**：Swagger/OpenAPI
- **文件存储**：AWS S3 / 阿里云OSS
- **缓存**：Redis

### 3.3 部署方案
- **云平台**：Railway (后端) + Vercel (前端)
- **数据库**：PostgreSQL (Railway)
- **CI/CD**：GitHub Actions
- **监控**：Prometheus + Grafana
- **日志**：Winston + ELK Stack

## 4. 数据库设计

### 4.1 核心数据表
- **users**：用户信息表
- **training_plans**：训练计划表（包含日期字段）
- **training_groups**：训练组表（每个训练组针对一个特定动作）
- **training_plan_groups**：训练计划-训练组关联表（多对多关系）
- **exercise_records**：训练记录表（关联训练计划）
- **exercises**：动作库表（用户自维护）
- **user_exercises**：用户收藏动作表

### 4.2 关系设计
- 用户 → 训练计划（一对多），训练计划绑定特定日期
- 训练计划 → 训练组（多对多）
- 训练组 → 动作（一对一），每个训练组针对一个特定动作
- 用户 → 训练记录（一对多）
- 训练记录 → 训练计划（一对一）

## 5. API设计

### 5.1 认证相关
- `POST /api/auth/register` - 用户注册
- `POST /api/auth/login` - 用户登录
- `POST /api/auth/logout` - 用户登出
- `POST /api/auth/refresh` - 刷新Token

### 5.2 训练计划相关
- `GET /api/plans` - 获取训练计划列表
- `POST /api/plans` - 创建训练计划
- `PUT /api/plans/:id` - 更新训练计划
- `DELETE /api/plans/:id` - 删除训练计划

### 5.3 训练组相关
- `GET /api/groups` - 获取训练组列表
- `POST /api/groups` - 创建训练组
- `PUT /api/groups/:id` - 更新训练组
- `DELETE /api/groups/:id` - 删除训练组

### 5.4 动作库相关
- `GET /api/exercises` - 获取动作列表
- `GET /api/exercises/:id` - 获取动作详情
- `POST /api/exercises` - 创建新动作
- `PUT /api/exercises/:id` - 更新动作信息
- `DELETE /api/exercises/:id` - 删除动作
- `GET /api/exercises/search` - 搜索动作
- `POST /api/exercises/import` - 批量导入动作
- `GET /api/exercises/templates` - 获取动作模板

## 6. UI/UX设计

### 6.1 设计风格
- **设计系统**：基于Ant Design设计语言
- **色彩方案**：现代健身风格，主色调为活力橙色/蓝色
- **字体**：系统字体栈，确保跨平台一致性
- **图标**：Ant Design Icons + 自定义健身图标

### 6.2 页面布局
- **响应式设计**：支持桌面端、平板、手机端
- **断点设置**：
  - 手机端：< 768px（移动优先设计）
  - 平板端：768px - 1024px
  - 桌面端：> 1024px
- **导航结构**：
  - 桌面端：顶部导航 + 侧边栏
  - 移动端：底部导航栏 + 汉堡菜单
- **主要页面**：
  - 仪表板（训练概览）
  - 日历页面（日程管理）
  - 训练组管理
  - 训练记录
  - 动作库
  - 个人设置

### 6.3 交互设计
- **操作流程**：简化用户操作步骤
- **反馈机制**：及时的操作反馈和状态提示
- **数据可视化**：直观的图表和进度展示

## 7. 非功能性需求

### 7.1 性能要求
- **页面加载时间**：首屏加载 < 3秒
- **API响应时间**：平均响应时间 < 500ms
- **并发用户**：支持1000+并发用户
- **移动端性能**：
  - 手机端首屏加载 < 2秒
  - 触摸响应时间 < 100ms
  - 支持离线缓存（PWA）
- **跨端兼容性**：
  - 支持主流浏览器（Chrome、Safari、Firefox、Edge）
  - 支持iOS Safari 12+、Android Chrome 70+
  - 支持不同屏幕尺寸和分辨率

### 7.2 安全要求
- **数据加密**：敏感数据加密存储
- **API安全**：JWT认证 + HTTPS
- **输入验证**：前后端数据验证
- **SQL注入防护**：使用ORM防止SQL注入

### 7.3 可用性要求
- **系统可用性**：99.5%以上
- **数据备份**：每日自动备份
- **故障恢复**：快速故障检测和恢复

## 8. 开发计划

### 8.1 第一阶段（MVP - 4周）
- 用户认证系统
- 基础训练组管理
- 简单训练记录
- 基础动作库管理（创建、编辑、删除）

### 8.2 第二阶段（功能完善 - 4周）
- 日程管理功能
- 数据统计和可视化
- 训练计划模板
- 移动端适配

### 8.3 第三阶段（优化增强 - 2周）
- 性能优化
- 用户体验优化
- 高级功能（目标设定、社交功能等）

## 9. 风险评估

### 9.1 技术风险
- **数据一致性**：动作库数据的完整性和一致性
- **性能瓶颈**：大量训练数据的查询性能
- **数据迁移**：从外部API迁移到自维护的数据迁移

### 9.2 业务风险
- **用户接受度**：产品功能是否符合用户需求
- **竞争压力**：市场上类似产品的竞争
- **数据安全**：用户训练数据的安全性

## 10. 成功指标

### 10.1 用户指标
- **用户注册量**：月新增用户数
- **用户活跃度**：日活/月活用户比例
- **用户留存率**：7日、30日留存率

### 10.2 产品指标
- **功能使用率**：各功能模块的使用频率
- **训练完成率**：用户训练计划的完成率
- **用户满意度**：用户反馈和评分

---

**文档版本**：v1.0  
**创建日期**：2024年12月  
**最后更新**：2024年12月  
**负责人**：产品团队
